{"version":3,"file":"vue.min.js","sources":["../src/vue.ts"],"sourcesContent":["import {\n\tdefineComponent,\n\tPropType,\n\tref,\n\th,\n\tisVue2,\n\tcomputed,\n\tonMounted,\n\tonBeforeUnmount,\n} from 'vue-demi'\nimport type UnityWebgl from 'unity-webgl'\n\nlet unityInstanceIdentifier: number = 0\n\nfunction cssUnit(val: string | number): string | number {\n\treturn isNaN(val as unknown as number) ? val : val + 'px'\n}\n\nexport default defineComponent({\n\tname: 'UnityWebglComponent',\n\tprops: {\n\t\tunity: {\n\t\t\ttype: Object as PropType<UnityWebgl>,\n\t\t},\n\t\twidth: {\n\t\t\ttype: [String, Number] as PropType<string | number>,\n\t\t\tdefault: '100%',\n\t\t},\n\t\theight: {\n\t\t\ttype: [String, Number] as PropType<string | number>,\n\t\t\tdefault: '100%',\n\t\t},\n\t\ttabindex: {\n\t\t\ttype: [Number, String] as PropType<number | string>,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst canvas = ref(null)\n\t\tunityInstanceIdentifier++\n\n\t\tconst canvasStyle = computed(() => {\n\t\t\treturn {\n\t\t\t\twidth: cssUnit(props.width),\n\t\t\t\theight: cssUnit(props.height),\n\t\t\t}\n\t\t})\n\t\tconst attrs: Record<string, string | number> = {\n\t\t\tid: `unity-canvas-${unityInstanceIdentifier}`,\n\t\t}\n\t\tif (props.tabindex || props.tabindex === 0) {\n\t\t\tattrs.tabindex = props.tabindex\n\t\t}\n\n\t\tonMounted(() => {\n\t\t\tif (canvas.value) {\n\t\t\t\tprops.unity?.render(canvas.value)\n\t\t\t}\n\t\t})\n\t\tonBeforeUnmount(() => {\n\t\t\tprops.unity?.unsafe_unload()\n\t\t})\n\n\t\treturn () =>\n\t\t\th(\n\t\t\t\t'canvas',\n\t\t\t\tisVue2\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tref: canvas,\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\tstyle: canvasStyle.value,\n\t\t\t\t\t\t}\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tref: canvas,\n\t\t\t\t\t\t\tstyle: canvasStyle.value,\n\t\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\t}\n\t\t\t)\n\t},\n})\n"],"names":["unityInstanceIdentifier","cssUnit","val","isNaN","defineComponent","name","props","unity","type","Object","width","String","Number","default","height","tabindex","setup","canvas","ref","canvasStyle","computed","attrs","id","onMounted","value","_a","render","onBeforeUnmount","unsafe_unload","h","isVue2","style","assign"],"mappings":";;;;;mRAYA,IAAIA,EAAkC,EAEtC,SAASC,EAAQC,GAChB,OAAOC,MAAMD,GAA4BA,EAAMA,EAAM,IACtD,QAEeE,kBAAgB,CAC9BC,KAAM,sBACNC,MAAO,CACNC,MAAO,CACNC,KAAMC,QAEPC,MAAO,CACNF,KAAM,CAACG,OAAQC,QACfC,QAAS,QAEVC,OAAQ,CACPN,KAAM,CAACG,OAAQC,QACfC,QAAS,QAEVE,SAAU,CACTP,KAAM,CAACI,OAAQD,UAGjB,KAAAK,CAAMV,GACL,MAAMW,EAASC,EAAGA,IAAC,MACnBlB,IAEA,MAAMmB,EAAcC,EAAAA,UAAS,KACrB,CACNV,MAAOT,EAAQK,EAAMI,OACrBI,OAAQb,EAAQK,EAAMQ,YAGlBO,EAAyC,CAC9CC,GAAI,gBAAgBtB,KAerB,OAbIM,EAAMS,UAA+B,IAAnBT,EAAMS,YAC3BM,EAAMN,SAAWT,EAAMS,UAGxBQ,EAAAA,WAAU,WACLN,EAAOO,QACG,QAAbC,EAAAnB,EAAMC,aAAO,IAAAkB,GAAAA,EAAAC,OAAOT,EAAOO,WAG7BG,EAAAA,iBAAgB,WACF,QAAbF,EAAAnB,EAAMC,aAAO,IAAAkB,GAAAA,EAAAG,eAAe,IAGtB,IACNC,EAACA,EACA,SACAC,EAAAA,OACG,CACAZ,IAAKD,EACLI,QACAU,MAAOZ,EAAYK,OAGnBf,OAAAuB,OAAA,CAAAd,IAAKD,EACLc,MAAOZ,EAAYK,OAChBH,GAGR"}